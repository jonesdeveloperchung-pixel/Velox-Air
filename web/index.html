<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Velox Air - The Companion</title>
    <!-- Hardcoded fallback styles to bypass Tracking Prevention -->
    <style id="tailwind-fallback">
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .h-screen { height: 100vh; }
        .p-4 { padding: 1rem; }
        .justify-between { justify-content: space-between; }
        .items-center { align-items: center; }
        .space-x-2 > :not([hidden]) ~ :not([hidden]) { margin-left: 0.5rem; }
        .bg-white\/50 { background-color: rgba(255, 255, 255, 0.5); }
        .backdrop-blur-md { backdrop-filter: blur(12px); }
        .hidden { display: none; }
        .rounded-2xl { border-radius: 1rem; }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
    </style>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" onerror="this.onerror=null; console.warn('Tailwind CDN blocked, using fallback');">
    <link rel="icon" href="data:,">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        body { background-color: #f8fafc; font-family: 'Inter', sans-serif; overflow: hidden; }
        .eco-bg { background: linear-gradient(135deg, #f0fdfa 0%, #f8fafc 100%); }
        .canvas-container { border: 1px solid #e2e8f0; background: #000; border-radius: 1.5rem; position: relative; overflow: hidden; }
        #videoCanvas { width: 100%; height: 100%; display: none; margin: auto; }
        .modal { transition: opacity 0.3s ease-in-out; }
    </style>
</head>
<body class="flex flex-col h-screen eco-bg">
    <!-- Top Status Bar -->
    <nav class="p-4 flex justify-between items-center bg-white/50 backdrop-blur-md border-b border-gray-100 z-50">
        <div class="flex items-center space-x-2">
            <span class="text-cyan-500 text-xl font-bold">ðŸ’ </span>
            <span class="font-bold text-gray-800 tracking-tight text-sm">Velox <span class="text-cyan-500">Air</span></span>
        </div>
        <div class="flex items-center space-x-4">
            <button id="helpBtn" onclick="toggleHelp()" class="text-[9px] bg-gray-100 text-gray-500 px-2 py-1 rounded font-bold uppercase">?</button>
            <button id="scalingBtn" class="text-[9px] bg-gray-100 text-gray-500 px-2 py-1 rounded font-bold uppercase"></button>
            <button id="controlToggleBtn" class="text-[9px] bg-gray-100 text-gray-500 px-2 py-1 rounded font-bold uppercase"></button>
            <button id="fullscreenBtn" onclick="toggleFullscreen()" class="text-[9px] bg-gray-100 text-gray-500 px-2 py-1 rounded font-bold uppercase"></button>
            <div id="hdBadge" class="hidden text-[9px] bg-yellow-400 text-black px-2 py-0.5 rounded font-black">é«˜æ¸…</div>
            <div id="ecoBadge" class="bg-cyan-100 text-cyan-600 text-[9px] px-2 py-0.5 rounded-full font-bold uppercase tracking-wider"></div>
            <div class="text-[10px] text-gray-400 font-mono"><span id="latency">0</span>ms</div>
            <div id="batteryStatus" class="text-xs text-gray-400">ðŸ”‹ --%</div>
        </div>
    </nav>

    <!-- Content Area -->
    <main class="flex-1 p-4 flex flex-col relative">
        <div id="mirrorSurface" class="flex-1 canvas-container shadow-2xl flex items-center justify-center">
            
            <canvas id="videoCanvas"></canvas>

            <!-- Setup Overlay -->
            <div id="setupSection" class="absolute inset-0 bg-white/90 z-40 flex items-center justify-center p-8 text-center">
                <div class="max-w-xs">
                    <div class="text-5xl mb-6 animate-bounce">ðŸ’ </div>
                    <h2 id="setupTitle" class="text-xl font-black text-gray-800 mb-2 uppercase tracking-tighter"></h2>
                    <p id="setupDesc" class="text-sm text-gray-500 mb-8"></p>
                    <button id="connectBtn" class="w-full bg-cyan-500 text-white py-4 rounded-2xl font-bold shadow-lg shadow-cyan-200 active:scale-95 transition-transform uppercase tracking-widest">
                    </button>
                    <div id="connectionStatus" class="mt-4 text-[10px] text-gray-400 uppercase tracking-widest font-bold"></div>
                </div>
            </div>

            <!-- Passive Hint -->
            <div id="passiveHint" class="absolute bottom-6 left-1/2 -translate-x-1/2 px-4 py-1.5 bg-black/20 backdrop-blur-sm rounded-full text-[9px] text-white/60 font-bold uppercase tracking-widest hidden">
            </div>
        </div>
    </main>

    <!-- Instructions Modal -->
    <div id="helpModal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center backdrop-blur-sm opacity-0 modal" onclick="toggleHelp()">
        <div class="bg-white rounded-2xl p-6 max-w-sm m-4 shadow-2xl" onclick="event.stopPropagation()">
            <h3 id="helpTitle" class="text-lg font-black text-gray-800 mb-4 uppercase tracking-tight"></h3>
            <ul class="text-xs text-gray-600 space-y-2 mb-6 list-disc pl-4">
                <li id="helpTip1"></li>
                <li id="helpTip2"></li>
                <li id="helpTip3"></li>
            </ul>
            <button onclick="toggleHelp()" class="w-full bg-gray-100 text-gray-600 py-3 rounded-xl font-bold uppercase tracking-widest text-xs hover:bg-gray-200">
                OK
            </button>
        </div>
    </div>

    <!-- Info Footer -->
    <footer class="p-4 text-center">
        <p id="footerText" class="text-[9px] text-gray-400 uppercase tracking-[0.4em]"></p>
    </footer>

    <script src="js/air_logic.js"></script>
</body>
</html>
